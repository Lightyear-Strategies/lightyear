<!DOCTYPE html>
<html lang="en">
<head>
    <title>HARO Table</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Font, Mulish-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&display=swap" rel="stylesheet">

    <!--lottie-->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@1.5.7/dist/lottie-player.js"></script>
    
    <!--jQuery-->
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!--DateRangePicker-->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


    <!--CSS-->
    <link rel="stylesheet" href="../static/css/haroTable3.css">
  </head>
<body id='body' onbeforeunload="saveSavedHaros()">


<div id="header">
    <div id="header"> <!--Header-->
        <header>
          <div class="alignment-wrapper">
            <section class="flex-1">
                <a href="/home">
                <img src="../static/img/logo.png" alt="" style="cursor: pointer;" >
                </a>
            </section>
            <section class="flex-6" id="header-nav">
                <div>
                    <a id="nav-selected" href="/query_db">
                        HARO Table
                    </a>
                </div>
                <div>
                    <a href="journalist_tracker">
                        Journalist Tracker
                    </a>
                </div>
                <div>
                    <a href="/topic_tracker">
                        Topic Tracker
                    </a>
                </div>
                <div>
                    <a href="email_validator">
                        Email Validator
                    </a>
                </div>
                <div>
                    <a href="contact_us">
                        Contact Us
                    </a>
                </div>
                <div id="logout-svg">
                    <a href="/logout">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="20" height="20" viewBox="0 0 256 256" xml:space="preserve">
      
                        <defs>
                        </defs>
                        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                            <path d="M 89.618 46.911 c 0.067 -0.162 0.105 -0.33 0.154 -0.497 c 0.043 -0.146 0.099 -0.285 0.129 -0.436 C 89.966 45.656 90 45.329 90 45.001 c 0 0 0 -0.001 0 -0.001 l 0 0 c 0 -0.328 -0.034 -0.656 -0.099 -0.979 c -0.029 -0.148 -0.085 -0.285 -0.127 -0.428 c -0.05 -0.169 -0.089 -0.341 -0.157 -0.505 c -0.07 -0.169 -0.166 -0.322 -0.253 -0.481 c -0.069 -0.127 -0.125 -0.258 -0.206 -0.38 c -0.184 -0.275 -0.392 -0.532 -0.625 -0.764 L 69.815 22.745 c -1.951 -1.952 -5.119 -1.952 -7.07 0 c -1.953 1.953 -1.953 5.119 0 7.071 L 72.929 40 h -43.35 c -2.761 0 -5 2.239 -5 5 c 0 2.762 2.239 5 5 5 h 43.35 L 62.745 60.185 c -1.953 1.952 -1.953 5.118 0 7.07 c 0.976 0.977 2.256 1.465 3.535 1.465 s 2.56 -0.488 3.535 -1.465 L 88.53 48.54 c 0.235 -0.234 0.445 -0.492 0.629 -0.769 c 0.077 -0.116 0.13 -0.241 0.196 -0.362 C 89.447 47.245 89.546 47.086 89.618 46.911 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            <path d="M 85 90 H 5 c -2.761 0 -5 -2.238 -5 -5 V 5 c 0 -2.761 2.239 -5 5 -5 h 80 c 2.762 0 5 2.239 5 5 v 14.395 c 0 2.761 -2.238 5 -5 5 s -5 -2.239 -5 -5 V 10 H 10 v 70 h 70 v -9.395 c 0 -2.762 2.238 -5 5 -5 s 5 2.238 5 5 V 85 C 90 87.762 87.762 90 85 90 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        </g>
                        </svg>
                    </a>
                </div>
            </section>
          </div>
        </header>
      </div> <!--End Header-->
</div>

<div id="page-body">
  <div id="real-content">
     <div id="image-placement">
          <img src="../static/img/chatting-haro.png">
      </div>
    <h1>
       <span id="highlight">HARO Table</span>
    </h1>
    <div class="menu-container">
      <div class="select-container">
        <div class="selected search-tab" id="fresh-btn" onclick="switchTable('fresh')">
          <img src="../static/img/LatestIcon.svg" alt="" style="height:1.7em; width:1.7em; transform:translate(0px, 5px)">
          Latest
        </div>
        <div class="search-tab" id="all-btn" onclick="switchTable('all')">
          <img src="../static/img/All-Time.svg" alt="" style="height:2em; width:2em; transform:translate(0px, 7px)">
          All
        </div>
        <div class="search-tab" id="saved-btn" onclick="switchTable('saved')">
          <img src="../static/img/saved.svg" alt="">
          Saved
        </div>
      </div>

            <div class="search-menu" id="search-menu">
              <div class="search-label" id="keywords-label">
                What are you looking for?
              </div>
              <input type="text" class="search-bar" id='keywords' placeholder='Search for Summary, Query, Requirements, etc.'>


              <button id="filter-btn" class="filter-btn" onclick="toggleExpandedSearchBar()">
                <svg width="27" height="23"  viewBox="0 0 27 23" fill="none" xmlns="http://www.w3.org/2000/svg" id="funnel-svg">
                  <path stroke-width="2" d="M3.09619 2.0625H23.9039C24.0915 2.0625 24.2752 2.10998 24.4325 2.19917C24.5897 2.28836 24.7139 2.41542 24.7898 2.56491C24.8657 2.71439 24.8902 2.87987 24.8601 3.04123C24.8301 3.20258 24.7469 3.35287 24.6207 3.47382L16.6582 11.1024C16.4961 11.2577 16.4063 11.4601 16.4063 11.6699V17.6422C16.4063 17.7811 16.3669 17.9178 16.2917 18.0403C16.2164 18.1628 16.1076 18.2672 15.9749 18.3442L12.0999 20.5942C11.954 20.6789 11.7844 20.7276 11.6093 20.735C11.4342 20.7423 11.26 20.7082 11.1054 20.6361C10.9508 20.564 10.8216 20.4568 10.7315 20.3258C10.6414 20.1948 10.5938 20.0449 10.5938 19.8922V11.67C10.5938 11.4601 10.504 11.2577 10.3418 11.1024L2.37937 3.47382C2.25313 3.35287 2.16994 3.20258 2.13992 3.04123C2.10989 2.87987 2.13433 2.71439 2.21026 2.56491C2.28618 2.41542 2.41033 2.28836 2.5676 2.19917C2.72488 2.10998 2.90852 2.0625 3.09619 2.0625V2.0625Z" stroke="#252733" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <div class="filter-btn-txt" id="filter-btn-txt" style="display: inline; font-weight: bold">
                    Filter
                  </div>
              </button>
            
                <div class="search-label hidden" id="mediaOutlet-label">
                  Media Outlet
                </div>
                <input type="text" class="search-bar hidden" id="mediaOutlet" list="media-outlets" placeholder="Select or Type">

              <datalist id='media-outlets'></datalist>

              <div class="search-label hidden" id="category-label">
                Category
              </div>
              <input type="text" class="search-bar hidden" id="category" list="categories" placeholder="Select or Type">
              <datalist id="categories"></datalist>
              <button id="search-collapse-button" class="hidden" onclick="toggleExpandedSearchBar()">
              </button>
              <div class="search-label hidden disabled" id="dateReceived-label">
                Date Interval
              </div>
              <input type="text" name="dateReceived" id="dateReceived" class="hidden search-bar disabled">
              <input class="form-check-input hidden" type="checkbox" value="check" style="grid-area: date-checkbox;" id="date-checkbox" onclick="toggleDatePicker()">
            </div>
          </div>

          <div class="table-head" id="table-head">
            <div class="head-element" style="grid-area: Summary" id="summary-col-label">Summary</div>
            <div class="head-element" style="grid-area: MediaOutlet">Media Outlet</div>
            <div class="head-element" style="grid-area: Category">Category</div>
            <div class="head-element" style="grid-area: DateReceived">Date Added</div>
            <div class="head-element" style="grid-area: Deadline">Due Date</div>
          </div>
      <!--/div--> <!--End sticky wrapper-->

        <div id="haro-table-body"></div>
        <div id="haro-counter"></div>
        <div id="last-updated"></div>
        <a href="#"id="help-circle">?</a>

  </div>
  <div id="bad-window-size" style="display: none; text-align: center;">
    <h1 style="margin-top:5em; margin-bottom:5em">Sorry, this experience is not suited for mobile at this time.</h1>
  </div>
    <div id="getDateUpdate">{{date_updated}}</div>
</div>
<script src="../static/js/haroTable3.js"></script>
</div>

</body>
<script type="text/javascript">
  $(document).ready(function () {

    let table_head = document.getElementById('table-head');
    let t_rect = table_head.getBoundingClientRect();
    let t_bot = t_rect.bottom;

    function resize_table () {
      // let counter = document.getElementById('haro-counter');
      // let c_rect = counter.getBoundingClientRect();
      // let c_top = c_rect.top;
      let c_top = window.innerHeight - 54.666666;


      let table_height = c_top - t_bot;
      document.getElementById('haro-table-body').style.height = table_height + 'px';
    }

    function compute_table_width () {
      let table = $('#haro-table-body');
      return table.width();
    }

    var table_width = compute_table_width();

    function resize_details () {
      $('.details').each(function (index) {
        $(this).width(table_width - 73);
      });
    }

    function bad_window_checker () {
      if(window.innerWidth < 1280 || window.innerHeight <450) {
        $('#real-content').hide();
        $('#bad-window-size').show();
      }
      else {
        $('#bad-window-size').hide();
        $('#real-content').show();
        resize_table();
      }
    }

    bad_window_checker(); 

    $(window).on('resize', resize_table);
    $(window).on('resize', function () {table_width = compute_table_width();});
    $(window).on('resize', resize_details);
    $(window).on('resize', bad_window_checker);


    $('#haro-table-body').on('click', resize_details);
    resize_table();
    });



</script>
</html>